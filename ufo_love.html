<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="color-scheme" content="dark" />
<title>Cometa Galáctico de Halagos ✨</title>
<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet" />
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet" />
<!-- GSAP -->
<script src="https://unpkg.com/gsap@3.12.2/dist/gsap.min.js" defer></script>
<style>
/* —— Reset —— */
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
html,body{width:100%;height:100%;overflow:hidden;font-family:"Great Vibes",cursive;background:#000;color:#fff;position:relative;touch-action:manipulation}

/* —— Universo —— */
.star{position:absolute;width:2px;height:2px;background:#ffffff;border-radius:50%;opacity:.8}
.planet{position:absolute;font-size:clamp(2rem,6vw,8rem);filter:drop-shadow(0 0 8px rgba(255,255,255,.35)) blur(1px);pointer-events:none;user-select:none;opacity:.6}
.planet.earth{font-size:clamp(3rem,8vw,12rem);opacity:.7}

/* —— UFO (oculto) —— */
.ufo{display:none;}

/* —— Cometa Interactivo —— */
.comet-container{position:absolute;cursor:pointer;user-select:none;z-index:3;touch-action:manipulation}
/* aura suavizada */
.comet{width:clamp(60px,12vw,100px);filter:drop-shadow(0 0 6px rgba(255,255,255,.6)) drop-shadow(0 0 15px rgba(100,149,237,.35));transition:filter .3s}
.comet-container:hover .comet{filter:drop-shadow(0 0 8px rgba(255,255,255,.7)) drop-shadow(0 0 20px rgba(135,206,235,.5))}

/* —— Burbuja del Cometa —— */
/* subimos ligeramente la burbuja */
.comet-bubble{position:absolute;left:clamp(80px,14vw,110px);top:-10%;transform:translateY(-100%);background:#fff;color:#000;padding:clamp(4px,2vw,6px) clamp(8px,3vw,12px);border-radius:10px;font-family:'Poppins',sans-serif;font-size:clamp(.7rem,3vw,.9rem);font-weight:600;box-shadow:0 2px 6px rgba(0,0,0,.4);white-space:normal;opacity:0;max-width:220px;line-height:1.2}
.comet-bubble::after{content:"";position:absolute;left:-8px;top:100%;transform:translateY(-20%) rotate(90deg);border:8px solid transparent;border-right-color:#fff}

/* —— Mensaje Central —— */
/* lo posicionaremos dinámicamente debajo del cometa */
#mensaje{position:absolute;left:50%;top:70%;transform:translateX(-50%);font-family:'Poppins',sans-serif;font-weight:700;font-size:clamp(2rem,8vw,6rem);text-shadow:0 0 12px rgba(255,255,255,.85);opacity:0;pointer-events:none;z-index:2;text-align:center;max-width:90vw;word-wrap:break-word}

/* —— Easter egg —— */
.easter-egg{position:absolute;font-size:clamp(20px,5vw,26px);left:85%;top:8%;cursor:pointer;opacity:.3;touch-action:manipulation}

/* —— Efectos del cometa —— */
.comet-trail{position:absolute;width:100%;height:100%;background:linear-gradient(to left,rgba(255,255,255,0.25),transparent);filter:blur(2px);opacity:0.55;transform:scaleX(1.5) translateX(-20%);animation:trailFlicker 2s ease-in-out infinite}
@keyframes trailFlicker{0%,100%{opacity:0.55}50%{opacity:0.75}}

/* —— Responsive —— */
@media(max-width:768px){
  .comet-bubble{left:clamp(65px,12vw,85px);font-size:clamp(.6rem,3.5vw,.8rem);max-width:160px}
  #mensaje{font-size:clamp(1.5rem,7vw,4rem)}
  .planet{font-size:clamp(1.5rem,5vw,6rem)}
  .planet.earth{font-size:clamp(2rem,6vw,8rem)}
  .comet{width:clamp(50px,10vw,80px)}
}
@media(max-width:480px){
  .comet-bubble{left:clamp(55px,10vw,70px);font-size:clamp(.5rem,3vw,.7rem);max-width:130px}
  #mensaje{font-size:clamp(1.2rem,6vw,3rem)}
  .comet{width:clamp(40px,8vw,60px)}
}
@media(max-height:500px) and (orientation:landscape){
  #mensaje{font-size:clamp(1rem,5vh,2.5rem)}
  .planet{font-size:clamp(1rem,4vh,4rem)}
  .planet.earth{font-size:clamp(1.5rem,5vh,6rem)}
}
</style>
</head>
<body>
<div id="mensaje">¡Eres la más hermosa!</div>
<script>
window.addEventListener('DOMContentLoaded', () => {
let centralShown=false;
let isMobile=window.innerWidth<=768;
let cometInteraction=false;

/* —— Utilidades —— */
const updateDeviceType=()=>{isMobile=window.innerWidth<=768};

/* —— Estrellas —— */
const createStars=(n=isMobile?150:250)=>{
  document.querySelectorAll('.star').forEach(s=>s.remove());
  for(let i=0;i<n;i++){
    const s=document.createElement('div');s.className='star';
    s.style.left=Math.random()*innerWidth+'px';
    s.style.top=Math.random()*innerHeight+'px';
    const size=Math.random()*2+1;s.style.width=size+'px';s.style.height=size+'px';
    document.body.appendChild(s);
    gsap.to(s,{opacity:0,yoyo:true,repeat:-1,duration:gsap.utils.random(1,3),ease:'sine.inOut',delay:gsap.utils.random(0,3)});
  }
};

/* —— Planetas —— */
const createPlanets=()=>{
  document.querySelectorAll('.planet').forEach(p=>p.remove());
  const data=isMobile?[
 {e:'🪐',cls:'',left:20,top:15},
 {e:'🌍',cls:'earth',left:50,top:35},
 {e:'🌕',cls:'',left:75,top:20},
 {e:'🛰️',cls:'',left:25,top:75}
  ]:[
 {e:'🪐',cls:'',left:15,top:22},
 {e:'🌍',cls:'earth',left:50,top:48},
 {e:'🌕',cls:'',left:80,top:28},
 {e:'🛰️',cls:'',left:22,top:78}
  ];
  data.forEach(d=>{
    const p=document.createElement('span');p.className='planet '+(d.cls||'');p.textContent=d.e;
    p.style.left=d.left+'vw';p.style.top=d.top+'vh';document.body.appendChild(p);
    const float=isMobile?15:30;gsap.to(p,{yoyo:true,repeat:-1,duration:gsap.utils.random(10,16),ease:'sine.inOut',y:'+='+float});
  });
};

/* —— Easter Egg —— */
const createEasterEgg=()=>{
  document.querySelectorAll('.easter-egg').forEach(e=>e.remove());
  const egg=document.createElement('div');egg.className='easter-egg';egg.textContent='⭐';document.body.appendChild(egg);
  egg.addEventListener('click',()=>{gsap.to(egg,{scale:1.8,rotation:360,duration:1.2,yoyo:true,repeat:1});alert('¡Descubriste el Easter Egg! ✨');});
};

/* —— Cometa Interactivo —— */
const createInteractiveComet=()=>{
  document.querySelectorAll('.comet-container').forEach(c=>c.remove());
  const container=document.createElement('div');
  container.className='comet-container';

  const comet=document.createElement('img');
  comet.src='ufos_v2.png'; // Asegúrate de tener una imagen de cometa en el mismo directorio
  comet.alt='Cometa';
  comet.className='comet';

  container.appendChild(comet);
  document.body.appendChild(container);

  // Manejar clicks del cometa
  const handleCometClick=e=>{
    if(cometInteraction) return;
    cometInteraction=true;

    let bubble=container.querySelector('.comet-bubble');
    if(bubble) bubble.remove();

    bubble=document.createElement('div');
    bubble.className='comet-bubble';
    bubble.innerHTML='Buscando<br>a la más hermosa!!';
    container.appendChild(bubble);

    gsap.fromTo(bubble,{opacity:0},{opacity:1,duration:.4});

    setTimeout(()=>{
      bubble.innerHTML='¡Ajá,<br>te encontré!';
      gsap.killTweensOf(container);

      const centerX=innerWidth/2-50,centerY=innerHeight/2-20,scale=isMobile?2:2.5;
      gsap.to(container,{x:centerX,y:centerY,scale,rotation:0,duration:1.2,ease:'power2.out',onComplete:() => {
        /* —— Colocamos el mensaje justo debajo del cometa —— */
        const rect=container.getBoundingClientRect();
        const msg=document.getElementById('mensaje');
        msg.style.left=(rect.left+rect.width/2)+'px';
        msg.style.top=(rect.bottom+20)+'px';
      }});

      if(!centralShown){
        centralShown=true;
        gsap.fromTo(mensaje,{opacity:0,scale:.85},{opacity:1,scale:1,duration:1.2,ease:'back.out(1.7)',delay:.6});
        gsap.to(mensaje,{scale:1.05,yoyo:true,repeat:-1,duration:4,ease:'sine.inOut',delay:1.5});
      }
    },2000);

    gsap.to(bubble,{opacity:0,duration:1,delay:4,onComplete:()=>{bubble.remove();cometInteraction=false;}});
    e.stopPropagation();
  };

  container.addEventListener('click',handleCometClick);
  container.addEventListener('touchend',handleCometClick);

  // Animación del cometa
  const fly=()=>{
    if(cometInteraction) return;
    const startX=-120,endX=innerWidth+120,startY=gsap.utils.random(50,innerHeight-150),endY=startY-gsap.utils.random(80,120);
    gsap.set(container,{x:startX,y:startY,rotation:15});
    gsap.to(container,{x:endX,y:endY,duration:gsap.utils.random(14,20),ease:'none',onComplete:()=>{
      if(!cometInteraction) fly();
    }});
  };

  fly();
};

/* —— Inicialización —— */
const initialize=()=>{
  updateDeviceType();
  createStars();
  createPlanets();
  createEasterEgg();
  createInteractiveComet();
};

/* —— Resize —— */
let resizeT;
window.addEventListener('resize',()=>{
  clearTimeout(resizeT);
  resizeT=setTimeout(()=>{
    updateDeviceType();
    if(!cometInteraction){
      gsap.killTweensOf('.comet-container');
      createStars();
      createPlanets();
      createEasterEgg();
      createInteractiveComet();
    }
  },250);
});

window.addEventListener('orientationchange',()=>{
  setTimeout(()=>window.dispatchEvent(new Event('resize')),500)
});

initialize();
});
</script>
</body>
</html>
